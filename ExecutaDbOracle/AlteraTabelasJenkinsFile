pipeline {

	agent any

	environment {
		DB_CONN_STRING = credentials('db_conn_string')
		DB_USER = credentials('db_user')
		DB_PASS = credentials('db_pass')
	}

	tools {nodejs "nodejs"}

	stages {
		stage("Dependencias") {

			steps {
				sh '''
					cd ExecutaDbOracle
					npm install
				'''
			}			
		}

		stage("Altera Schema") {
			steps {
				sh '''
					cd ExecutaDbOracle
					node ExecutaScriptDdl.js $DB_CONN_STRING $DB_USER $DB_PASS ./sql/cria_evento_criminal.sql
				'''
			}
		}
	}

}